<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generator</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<header class="bg-dark text-light py-3 mb-3">
    <div class="container">
        <h1><a class="nav-link" href="index.html">Digitization Tools<a></h1>
    </div>
</header>

<div class="container w-75 border shadow p-4">
  <h3 class="mb-4">Generator</h3>
  <h4 class="mb-4">[year] JDG number year XPlimRegion-topic</h4>

  <form id="generatorForm" class="row g-3">
    <!-- Number -->
    <div class="col-12">
      <label for="number" class="form-label">Number</label>
      <input type="text" class="form-control" id="number" autofocus required>
    </div>

    <!-- Year -->
    <div class="col-12">
      <label for="year" class="form-label">Year</label>
      <input type="number" class="form-control" id="year" min="1900" max="2099" step="1" required>
    </div>

    <!-- X -->
    <div class="col-12">
      <label for="x" class="form-label">X: (1, 3, 5)</label>
      <select class="form-select" id="x" required>
        <option value="" selected disabled>Choose...</option>
        <option value="1">1</option>
        <option value="3">3</option>
        <option value="5">5</option>
      </select>
    </div>

    <!-- Region -->
    <div class="col-12">
      <label for="region" class="form-label">Region</label>
      <input type="text" class="form-control" id="region" required>
    </div>

    <!-- Topic -->
    <div class="col-12">
      <label for="topic" class="form-label">Topic</label>
      <input type="text" class="form-control" id="topic" required>
    </div>

    <!-- Button -->
    <div class="col-12">
      <button type="button" id="generateBtn" class="btn btn-primary">Generate</button>
    </div>
  </form>

  <!-- Output -->
  <div class="mt-3">
    <label class="form-label">Generated Text</label>
    <input type="text" class="form-control" id="output" readonly disabled>
  </div>
</div>

<script>
  const xMap = {
    "1": "Mon",
    "3": "Trim",
    "5": "Pent"
  };

  function generateText() {
    const number = document.getElementById("number").value.trim();
    const year = document.getElementById("year").value.trim();
    const x = document.getElementById("x").value;
    const region = document.getElementById("region").value.trim();
    const topic = document.getElementById("topic").value.trim();

    if (!number || !year || !x || !region || !topic) {
      alert("All fields are required!");
      return;
    }

    const formatted = `[${year}] JDG ${number} ${year} ${xMap[x]}Plim${region}-${topic}`;
    document.getElementById("output").value = formatted;

    // Copy to clipboard
    navigator.clipboard.writeText(formatted).then(() => {
      console.log("Copied to clipboard");
    }).catch(err => console.error("Clipboard error:", err));
  }

  document.getElementById("generateBtn").addEventListener("click", generateText);

  // Pressing Enter anywhere will trigger Generate
  document.getElementById("generatorForm").addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
      e.preventDefault();
      generateText();
    }
    if (document.activeElement.id === "x") {
      if (e.key === "1" || e.key === "3" || e.key === "5") {
        document.activeElement.value = e.key;
      }
    }
  });
</script>

</body>
</html>
